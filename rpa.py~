import pyautogui as pa

from time import sleep

default_timeout=60

# function that waits until an image appears on screen
# or reaches timeout
def waitAppear(img, timeout=default_timeout, _slept=0):
    try:
        pos = pa.locateCenterOnScreen(img, confidence=.5)
        if not pos:
            raise Exception(
                f"Image not found ({img}). "+
                "ImageNotFoundException not thrown. "+
                "Function has just returned None."
            )

    except Exception:
        sleep(1)
        print(f"Currently slept {_slept}s.")
        _slept+=1
        if slept <= timeout:
            pos = waitAppear(img, _slept=_slept)
        else:
            raise Exception(
                f"Reached timeout of {timeout}s while "+
                f"waiting for the image {img} to appear "+
                "on screen."
            )
        
        return pos
